(this["webpackJsonppocsag-telegram"]=this["webpackJsonppocsag-telegram"]||[]).push([[0],{14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(9),a=n.n(s),i=(n(14),n(2)),l=n.n(i),u=n(6),o=n(3),b=n(8),m=n(0);function j(e){var t=function(){var t=Object(o.a)(l.a.mark((function t(n){var c,r,s,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c=n.target.elements,r={name:c.name.value,ric:c.ric.value},t.next=5,fetch("/receivers",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return s=t.sent,t.next=8,s.json();case 8:a=t.sent,r.id=a.id,e.addReceiver(r),c.name.value="",c.ric.value="";case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)("form",{className:"rounded shadow p-3 mb-5 bg-gray-100",onSubmit:t,children:[Object(m.jsxs)("label",{className:"block mb-2 flex items-center justify-between",children:["Name:",Object(m.jsx)("input",{className:"w-1/2",type:"text",name:"name"})]}),Object(m.jsxs)("label",{className:"block mb-2 flex items-center justify-between",children:["RIC:",Object(m.jsx)("input",{className:"w-1/2",type:"number",name:"ric"})]}),Object(m.jsx)("button",{className:"btn-sm bg-green-100",type:"submit",children:"Erstellen"})]})}function p(e){function t(){return(t=Object(o.a)(l.a.mark((function t(n){var c,r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),c=n.target.elements,r=(r=Array.from(c).filter((function(e){return"text"===e.type&&""!==e.value})).map((function(e){return parseInt(e.value)}))).concat(e.receivers),s={message:c.message.value,receivers:r},fetch("/send-telegram",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(m.jsxs)("div",{className:"rounded shadow p-3 bg-green-100",children:[Object(m.jsx)("h3",{className:"font-bold mb-3",children:"Alarmierung"}),Object(m.jsxs)("form",{onSubmit:function(e){return t.apply(this,arguments)},children:[Object(m.jsxs)("label",{className:"text-sm",children:["Telegram-Text:",Object(m.jsx)("textarea",{name:"message",className:"w-full mb-2",rows:"5",required:!0})]}),Object(m.jsxs)("label",{className:"text-sm",children:["RIC Manuell eingeben",Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{className:"block mb-1",type:"text",name:"ric[]"}),Object(m.jsx)("input",{className:"block mb-1",type:"text",name:"ric[]"}),Object(m.jsx)("input",{className:"block mb-1",type:"text",name:"ric[]"})]})]}),Object(m.jsx)("button",{className:"btn-sm mt-2 bg-white",type:"submit",children:"Senden"})]})]})}function d(e){var t=Object(c.useState)([]),n=Object(b.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)([]),i=Object(b.a)(a,2),d=i[0],f=i[1];function x(){return(x=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/receivers");case 2:return t=e.sent,e.t0=s,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Object(c.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]),!r)return"Loading";var h=r.map((function(e,t){return Object(m.jsxs)("div",{className:"relative px-3 py-2 mb-5 rounded shadow ".concat(d.includes(e.ric)?"bg-blue-200":"bg-gray-100"),onClick:function(){return d.includes(e.ric)?f(d.filter((function(t){return t!==e.ric}))):f([].concat(Object(u.a)(d),[e.ric]))},children:[Object(m.jsx)("span",{className:"absolute top-0 right-0 w-4 h-4 flex items-center justify-center bg-red-200 rounded-full -mr-2 -mt-2 cursor-pointer z-10",onClick:function(e){return function(e,t){if(t.stopPropagation(),window.confirm("Empf\xe4nger entfernen?")){fetch("/receivers/"+r[e].id,{method:"DELETE"});var n=Object(u.a)(r);n.splice(e,1),s(n)}}(t,e)},children:"\xd7"}),Object(m.jsxs)("div",{className:"text-sm",children:[Object(m.jsxs)("p",{children:["Name: ",e.name]}),Object(m.jsxs)("p",{children:["RIC: ",e.ric]})]})]},e.ric.toString()+"_"+t)}));return Object(m.jsxs)("div",{className:"px-3 py-5",children:[Object(m.jsx)("div",{className:"flex items-center justify-between flex-wrap",children:h}),Object(m.jsx)(j,{addReceiver:function(e){return s([].concat(Object(u.a)(r),[e]))}}),Object(m.jsx)(p,{receivers:d})]})}var f=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)("header",{className:"App-header",children:Object(m.jsx)("div",{className:"container mx-auto",children:Object(m.jsx)(d,{})})})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(f,{})}),document.getElementById("root")),x()}},[[17,1,2]]]);
//# sourceMappingURL=main.57ca59c1.chunk.js.map